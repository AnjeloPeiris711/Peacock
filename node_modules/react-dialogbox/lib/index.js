(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Dialogbox:()=>ce,default:()=>se});require("core-js/modules/es6.object.set-prototype-of.js"),require("core-js/modules/es6.object.get-prototype-of.js"),require("core-js/modules/es6.reflect.construct.js"),require("core-js/modules/es6.object.keys.js"),require("core-js/modules/es6.symbol.js"),require("core-js/modules/es6.array.filter.js"),require("core-js/modules/es6.object.get-own-property-descriptor.js"),require("core-js/modules/es7.object.get-own-property-descriptors.js"),require("core-js/modules/es6.object.assign.js"),require("core-js/modules/es6.string.iterator.js"),require("core-js/modules/es6.object.to-string.js"),require("core-js/modules/es6.array.iterator.js"),require("core-js/modules/web.dom.iterable.js");const o=require("react"),n=(require("core-js/modules/es6.string.includes.js"),require("core-js/modules/es7.array.includes.js"),require("core-js/modules/es6.array.map.js"),require("classnames"));var r=e.n(n);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=["disabled","onClick","className","dialogboxType","children","btnType"];function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=p(e);if(t){var r=p(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return b(this,o)}}function b(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(p,e);var t,n,i,b=f(p);function p(){return s(this,p),b.apply(this,arguments)}return t=p,(n=[{key:"render",value:function(){var e,t,n,i=this.props,s=i.disabled,u=void 0!==s&&s,d=i.onClick,f=i.className,b=void 0===f?"":f,p=i.dialogboxType,m=i.children,g=i.btnType,h=c(i,a);return o.createElement("button",l({className:r()("dialogbox-button",b,g,(e={},t=p+"-btn",n=p,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),onClick:d,disabled:u},h),o.createElement("span",null,m))}}])&&u(t.prototype,n),i&&u(t,i),p}(o.Component);require("core-js/modules/es6.map.js"),require("core-js/modules/es6.set.js");function g(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const y=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"curObid",0),h(this,"observables",new Map),h(this,"currentObserver",null)}var t,o,n;return t=e,(o=[{key:"trigger",value:function(e){this.observables.forEach((function(t,o){o==e&&t&&t.forEach((function(e){e()}))}))}},{key:"collectObserver",value:function(e){this.currentObserver&&(this.observables.has(e)?this.observables.get(e).add(this.currentObserver):this.observables.set(e,new Set([this.currentObserver])))}}])&&g(t.prototype,o),n&&g(t,n),e}());function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t,this.obid=++y.curObid}var t,o,n;return t=e,(o=[{key:"get",value:function(){return y.collectObserver(this.obid),this.value}},{key:"set",value:function(e){return this.value=e,y.trigger(this.obid),!0}}])&&x(t.prototype,o),n&&x(t,n),e}();function O(e){Object.keys(e).forEach((function(t){if("object"===v(e[t]))O(e[t]);else{var o=new w(e[t]);Object.defineProperty(e,t,{get:function(){return o.get()},set:function(e){return o.set(e),!0}})}}))}const k=function(e){y.currentObserver=e,e(),y.currentObserver=null};function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S,P,I;function N(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function C(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?N(Object(o),!0).forEach((function(t){_(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):N(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function D(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=M(e);if(t){var r=M(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return L(this,o)}}function L(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const B=(P=S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(l,e);var t,n,i,a=q(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),_(T(t=a.call(this,e)),"isEmbedded",!1),_(T(t),"dragMove",(function(e){if(t.controllable()){e.stopPropagation();var o=e.clientX,n=e.clientY,r=t.state.toRight,i=t.state.toBottom;document.onmousemove=function(e){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var a=e.clientX>10?e.clientX<document.body.clientWidth-10?e.clientX:document.body.clientWidth-10:10,l=e.clientY>10?e.clientY<document.body.clientHeight-10?e.clientY:document.body.clientHeight-10:10,c=a-o+r,s=l-n+i,u=document.querySelector(".dialogbox-extend-mask-x"),d=document.querySelector(".dialogbox-extend-mask-y");e.clientX<10?u.className.includes("dialogbox-extend-mask-in-x")||(u.className=" dialogbox-extend-mask-x mask-in-left"):e.clientX>document.body.clientWidth-10?u.className.includes("dialogbox-extend-mask-in-x")||(u.className=" dialogbox-extend-mask-x mask-in-right"):e.clientY<0?d.className.includes("dialogbox-extend-mask-in-y")||(d.className=" dialogbox-extend-mask-y mask-in-top"):e.clientY>document.body.clientHeight?d.className.includes("dialogbox-extend-mask-in-y")||(d.className=" dialogbox-extend-mask-y mask-in-bottom"):(u.className.includes("mask-in-left")&&(u.className="dialogbox-extend-mask-x"),u.className.includes("mask-in-right")&&(u.className="dialogbox-extend-mask-x mask-out-right"),d.className.includes("mask-in-top")&&(d.className="dialogbox-extend-mask-y mask-out-top"),d.className.includes("mask-in-bottom")&&(d.className="dialogbox-extend-mask-y mask-out-bottom")),t.setState({toRight:c,toBottom:s})},document.onmouseup=function(e){var o=document.querySelector(".dialogbox-extend-mask-x"),n=document.querySelector(".dialogbox-extend-mask-y");o.className="dialogbox-extend-mask-x",n.className="dialogbox-extend-mask-y",(e.clientY<0||e.clientY>document.body.clientHeight)&&t.handleExtend(),e.clientX<10&&t.handleExtend("left"),e.clientX>document.body.clientWidth-10&&t.handleExtend("right"),document.onmousemove=null}}})),_(T(t),"handleFocus",(function(){if(!t.props.isModal){var e=t.props.store,o=e.dialogboxList,n=e.focusZIndex;if(o.length>1&&t.state.zIndex<n){var r=e.promoteZIndex(t.dialogboxId);t.setState({zIndex:r})}}})),_(T(t),"handleMaskClick",(function(e){var o=t.props,n=o.maskClosable,r=o.store.dialogboxList;n&&(e.toElement!==document.querySelector("#dialogbox-root")&&e.toElement!==document.querySelector(".dialogbox-mask")||(t.isEmbedded||r[r.length-1].dialogboxId==t.dialogboxId)&&t.onCancel())})),_(T(t),"footerRender",(function(){var e=t.props,n=e.footer,r=e.okText,i=e.cancelText,a=t.state.draggable,l=void 0===a||a;return"[object Object]"===Object.prototype.toString.call(n)&&n.type?o.createElement("div",{className:"dialogbox-footer-wrapper"},n):!1===n?null:o.createElement("div",{className:"dialogbox-footer",onMouseDown:function(e){l&&t.dragScaleY(e)}},o.createElement("div",{className:"dialogbox-footer-btnList"},o.createElement(m,{dialogboxType:t.props.dialogboxStyle,className:"dialogbox-footer-btn cancel-btn",onClick:function(){return t.onCancel()}},i||"取消"),o.createElement(m,{dialogboxType:t.props.dialogboxStyle,btnType:"primary",className:"dialogbox-footer-btn ok-btn",onClick:function(){return t.onOk()}},r||"确认")))})),t.init(e),t}return t=l,(n=[{key:"init",value:function(e){var t=400,o=180,n=document.body,r=n.clientWidth,i=n.clientHeight;e.width&&"number"==typeof e.width?t=e.width>r?r:e.width:e.width&&"string"==typeof e.width&&e.width.includes("px")?t=parseInt(e.width)>r?r:parseInt(e.width):e.width&&"string"==typeof e.width&&e.width.includes("%")&&(t=parseInt(e.width)>100?r:r*parseInt(e.width)/100),e.height&&"number"==typeof e.height?o=e.height>i?i:e.height:e.height&&"string"==typeof e.height&&e.height.includes("px")?o=parseInt(e.height)>i?i:parseInt(e.height):e.height&&"string"==typeof e.height&&e.height.includes("%")&&(o=parseInt(e.height)>100?i:i*parseInt(e.height)/100),o<120&&(o=120),t<200&&(t=200);var a=e.store,l=e.mask,c=void 0===l||l,s=e.visible,u=e.draggable,d=void 0===u||u,f=e.title,b=(e.zIndex,e.fullScreen,a.registerDialogbox(this,c,s));this.dialogboxId=b,this.state={width:t,height:o,toRight:0,toBottom:0,isExtend:!1,draggable:d,zIndex:b,marginTop:0-.5*o,marginLeft:0-.5*t,historyWidth:t,historyHeight:o,title:f,transition:"none"}}},{key:"componentWillReceiveProps",value:function(e){var t=e.visible;""!==t&&null!==t&&(!1===t?this.afterClose():this.props.store.changeDialogboxVisible(this.dialogboxId,!0))}},{key:"componentWillUnmount",value:function(){this.afterClose(),this.props.store.unRegisterDialogbox(this.dialogboxId)}},{key:"afterClose",value:function(){this.props.afterClose&&this.props.afterClose(),this.props.store.changeDialogboxVisible(this.dialogboxId,!1)}},{key:"onOk",value:function(){this.props.onOk&&this.props.onOk()}},{key:"onCancel",value:function(){this.props.onCancel&&this.props.onCancel()}},{key:"controllable",value:function(){var e=this.props.store.getFocusItem(),t=e.dialogboxId===this.dialogboxId,o=this.props.isModal;return!((e.reactElement.props.isModal||o)&&!t)}},{key:"isfoucs",value:function(){return this.props.store.focusZIndex===this.state.zIndex}},{key:"dragScaleX",value:function(e){var t=this;if(this.controllable()){e.stopPropagation();var o,n=this.state,r=n.width,i=n.toRight,a=e.clientX,l=this.dialogbox.offsetLeft+i;if(a-l<=20&&a>=l)o="left";else{if(!(r+l-a<=20))return!1;o="right"}document.onmousemove=function(e){var n,l;window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),"left"===o?(n=e.clientX-a+i,l=(l=r+a-e.clientX)<200?200:l):(n=i,l=(l=r+e.clientX-a)<200?200:l),t.setState({toRight:n,width:l})},document.onmouseup=function(){document.onmousemove=null}}}},{key:"dragScaleY",value:function(e){var t=this;if(this.controllable()){e.stopPropagation();var o,n=this.state,r=n.height,i=n.toBottom,a=e.clientY,l=this.dialogbox.offsetTop+i;if(a-l<=20&&a>=l)o="top";else{if(!(r+l-a<=20))return!1;o="bottom"}document.onmousemove=function(e){var n,l;window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),"top"===o?(n=e.clientY-a+i,l=(l=r+a-e.clientY)<120?120:l):(n=i,l=(l=r+e.clientY-a)<120?120:l),t.setState({toBottom:n,height:l})},document.onmouseup=function(){document.onmousemove=null}}}},{key:"dragScale",value:function(e){var t=this;if(this.controllable()){e.stopPropagation();var o,n,r=this.state,i=r.width,a=r.toRight,l=e.clientX,c=this.dialogbox.offsetLeft+a;if(l-c<=20&&l>=c)o="left";else{if(!(i+c-l<=20))return!1;o="right"}var s=this.state,u=s.height,d=s.toBottom,f=e.clientY,b=this.dialogbox.offsetTop+d;if(f-b<=20&&f>=b)n="top";else{if(!(u+b-f<=20))return!1;n="bottom"}document.onmousemove=function(e){var r,c,s,b;window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),"left"===o?(r=e.clientX-l+a,c=(c=i+l-e.clientX)<200?200:c):(r=a,c=(c=i+e.clientX-l)<200?200:c),"top"===n?(s=e.clientY-f+d,b=(b=u+f-e.clientY)<120?120:b):(s=d,b=(b=u+e.clientY-f)<120?120:b),t.setState({toRight:r,width:c,toBottom:s,height:b})},document.onmouseup=function(){document.onmousemove=null}}}},{key:"handleExtend",value:function(e){var t=this;if(this.controllable()){var o,n,r=document.body,i=r.clientWidth,a=r.clientHeight,l=this.state,c=l.draggable,s=l.historyWidth,u=l.historyHeight,d=l.isExtend,f=l.toRight;d?(c=!1!==this.props.draggable,i=s,a=u,o=0-u/2,n=0-s/2,f=0):(o=0,n=0,f=0,c=!1,"left"===e?i*=.5:"right"===e?f=i*=.5:(o=0,n=0)),this.setState({historyWidth:this.state.width,historyHeight:this.state.height,toRight:f,toBottom:0,draggable:c,marginTop:o,marginLeft:n,isExtend:!d,width:i,height:a,transition:"0.5s"}),setTimeout((function(){t.setState({transition:"none"})}),500)}}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.isEmbedded=!document.getElementById("dialogbox-wrapper-"+e.dialogboxId),e.isEmbedded?document.querySelector(".dialogbox-mask").addEventListener("click",(function(t){e.handleMaskClick(t)})):document.getElementById("dialogbox-root").addEventListener("click",e.handleMaskClick)})),setTimeout((function(){e.props.fullScreen&&e.handleExtend()}),600)}},{key:"draggableAngleRender",value:function(){var e=this;return["right-bottom","right-top","left-bottom","left-top"].map((function(t){return o.createElement("div",{key:t,className:r()("draggableAngle",t),onMouseDown:function(t){return e.dragScale(t)}})}))}},{key:"draggableSideRender",value:function(){var e=this;return["right","top","bottom","left"].map((function(t){return o.createElement("div",{key:t,className:r()("draggableSide",t),onMouseDown:function(o){"top"===t||"bottom"===t?e.dragScaleY(o):e.dragScaleX(o)}})}))}},{key:"btnListRender",value:function(){var e=this;return o.createElement("div",{className:"dialogbox-header-btnList"},"macos"!=this.props.dialogboxStyle?o.createElement(o.Fragment,null,o.createElement("div",{className:r()("dialogbox-header-btn btn-extend"),onClick:function(){return e.handleExtend()}},o.createElement("i",{className:"dialogbox-icon dialogbox-icon-extend"})),o.createElement("div",{className:"dialogbox-header-btn btn-close",onClick:function(t){e.controllable()?e.onCancel():t.preventDefault()}},o.createElement("i",{className:"dialogbox-icon dialogbox-icon-close"}))):o.createElement(o.Fragment,null,o.createElement("div",{className:r()("dialogbox-header-btn macos-style btn-extend"),onClick:function(){return e.handleExtend()}},o.createElement("i",{className:"dialogbox-icon dialogbox-icon-extend"},o.createElement("span",{className:"dialogbox-icon-extend-rectangle"},o.createElement("span",{className:"dialogbox-icon-extend-shadow"})),o.createElement("span",{className:"dialogbox-icon-extend-rectangle"},o.createElement("span",{className:"dialogbox-icon-extend-shadow"})))),o.createElement("div",{className:"dialogbox-header-btn macos-style btn-close",onClick:function(){return e.onCancel()}},o.createElement("i",{className:"dialogbox-icon dialogbox-icon-close"}),o.createElement("i",{className:"dialogbox-icon dialogbox-icon-extend"}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,i=t.title,a=(t.closable,t.bodyStyle),l=t.dialogboxStyle,c=void 0===l?"windows":l,s=t.visible,u=t.header,d=void 0===u||u,f=this.state,b=f.isExtend,p=f.draggable,m=f.toRight,g=f.toBottom,h=f.transition,y=f.width,v=f.height,x=f.zIndex,w=f.marginTop,O=f.marginLeft,k=r()("dialogbox","dialogbox-animation-in",_({"dialogbox-extendStatus":b},n,n),_({},c,c),{"dialogbox-uncontrolable":!this.controllable()},{"dialogbox-foucs":this.isfoucs()}),j={};return(m||g)&&(j={transform:"translate("+m+"px,"+g+"px)"}),o.createElement("div",{ref:function(t){return e.dialogbox=t},id:"dialogbox-"+this.dialogboxId,className:k,onClick:function(){e.handleFocus()},onMouseDown:function(t){e.controllable()||t.preventDefault()},style:C(C({},a),{},{display:s?"flex":"none",width:y+"px",height:v+"px",zIndex:x,marginTop:w,marginLeft:O,transition:h},j)},this.draggableAngleRender(),this.draggableSideRender(),d&&o.createElement("div",{className:"dialogbox-header"},o.createElement("div",{className:"dialogbox-title",onDoubleClick:function(t){t.stopPropagation(),e.handleFocus(),e.handleExtend()},onMouseDown:function(t){e.handleFocus(),p&&e.dragMove(t)}},o.createElement("span",{className:"dialogbox-title-content",onDoubleClick:function(e){e.stopPropagation()},onMouseDown:function(e){e.stopPropagation()}},i)),this.btnListRender()),o.createElement("div",{className:"dialogbox-body dialogbox-scroll"},o.createElement("div",{className:"dialogbox-content"},this.props.children)),this.footerRender())}}])&&D(t.prototype,n),i&&D(t,i),l}(o.Component),I=P.prototype.componentWillMount,void(P.prototype.componentWillMount=function(){var e=this;I&&I.call(this),k((function(){e.render(),e.forceUpdate()}))})||S);require("core-js/modules/es6.array.slice.js"),require("core-js/modules/es6.array.find.js"),require("core-js/modules/es6.array.find-index.js");var Y,X;function z(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const A=new(X=function(e,t,o,n,r){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce((function(o,n){return n(e,t,o)||o}),i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}((Y=function(){function e(){var t,o,n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=[],(o="dialogboxList")in(t=this)?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,function(e,t,o,n){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(n):void 0})}(this,"focusZIndex",X,this),document.addEventListener("keydown",(function(e){if(!r.getIsAllDialogboxHide()){var t=r.getFocusItem().dialogboxId,o=r.findReactElement(t);o&&("Enter"===e.key&&(e.preventDefault(),o.props.onOk&&o.props.onOk()),"Escape"===e.key&&(e.preventDefault(),o.props.onCancel&&o.props.onCancel()))}}))}var t,o,n;return t=e,(o=[{key:"getFocusItem",value:function(){return this.dialogboxList.length&&this.dialogboxList[this.dialogboxList.length-1]}},{key:"findReactElement",value:function(e){var t=this.dialogboxList.find((function(t){return t.dialogboxId==e}));return t&&t.reactElement}},{key:"registerDialogbox",value:function(e,t,o){var n=++this.focusZIndex;return this.dialogboxList.push({dialogboxId:n,reactElement:e,visible:o,mask:t}),this.changeMask(),n}},{key:"unRegisterDialogbox",value:function(e){var t=this.getDialogboxById(e).idx;this.dialogboxList.splice(t,1),this.changeMask()}},{key:"changeDialogboxVisible",value:function(e,t){var o=this.getDialogboxById(e).idx;this.dialogboxList[o].visible=t,this.changeMask()}},{key:"changeMask",value:function(){var e=document.querySelector(".dialogbox-mask"),t=this.getIsDialogboxMask();if(e){var o=document.querySelector(".dialogbox-mask-out");t?o&&(e.className="dialogbox-mask"):o||(e.className="dialogbox-mask dialogbox-mask-out")}else{var n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div");n.className=t?"dialogbox-mask":"dialogbox-mask dialogbox-mask-out",r.className="dialogbox-extend-mask-x",i.className="dialogbox-extend-mask-y",document.body.appendChild(n),document.body.appendChild(r),document.body.appendChild(i)}}},{key:"getIsAllDialogboxHide",value:function(){return this.dialogboxList.every((function(e){return!e.visible}))}},{key:"getIsDialogboxMask",value:function(){return!!this.dialogboxList.find((function(e){return e.visible&&e.mask}))}},{key:"getDialogboxById",value:function(e){var t=this.dialogboxList.findIndex((function(t){return t.dialogboxId==e}));return{idx:t,item:this.dialogboxList[t]}}},{key:"promoteZIndex",value:function(e){for(var t=0;t<this.dialogboxList.length;t++)if(this.dialogboxList[t].dialogboxId==e){var o=this.dialogboxList[t];this.dialogboxList.splice(t,1),this.dialogboxList.push(o);break}return++this.focusZIndex}}])&&z(t.prototype,o),n&&z(t,n),e}()).prototype,"focusZIndex",[function(e,t,o){var n=o.initializer();"object"===j(n)&&O(n);var r=new w(n);return{enumerable:!0,get:function(){return r.get()},set:function(e){return r.set(e)}}}],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),Y),W=require("react-dom");function H(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Z(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?H(Object(o),!0).forEach((function(t){U(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):H(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function V(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var G=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,"options",{})}var t,n,r;return t=e,(n=[{key:"createDialogbox",value:function(e,t){var o=this,n=A.focusZIndex+1,r=t.containerNode||document.body,i=document.querySelector("#dialogbox-root");i||((i=document.createElement("div")).setAttribute("id","dialogbox-root"),r.appendChild(i));var a=document.createElement("div");a.setAttribute("id","dialogbox-wrapper-".concat(n)),a.setAttribute("class","dialogbox-wrapper"),i.appendChild(a);var l=W.render(e,document.getElementById("dialogbox-wrapper-"+n));return{DOM:document.getElementById("dialogbox-"+n),dialogboxId:n,close:function(){return o.hideDialogbox(n)},reactElement:l}}},{key:"open",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options,n=A.focusZIndex+1,r=o.createElement(B,F({visible:!0,onOk:function(){e.hideDialogbox(n)},onCancel:function(){e.hideDialogbox(n)}},t),t.children);return this.createDialogbox(r,t)}},{key:"showDialogbox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options;return this.createDialogbox(e,t)}},{key:"hideDialogbox",value:function(e){var t=document.querySelector("#dialogbox-root"),o=document.querySelector("#dialogbox-wrapper-"+e),n=document.querySelector("#dialogbox-"+e);o?(n.classList.add("dialogbox-animation-out"),setTimeout((function(){W.unmountComponentAtNode(o),t.removeChild(o),document.querySelectorAll(".dialogbox-wrapper").length||t.parentNode.removeChild(t)}),300)):console.warn("不存在dialogboxId为"+e+"的对话框")}},{key:"hideAllDialogbox",value:function(){var e=document.querySelector("#dialogbox-root");e?e.parentNode.removeChild(e):console.warn("当前并无显示的对话框")}},{key:"setOption",value:function(e){this.options=Z(Z({},this.options),e)}}])&&V(t.prototype,n),r&&V(t,r),e}();const J=window.dialogbox=new G;function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function $(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function ee(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?$(Object(o),!0).forEach((function(t){te(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):$(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function te(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=le(e);if(t){var r=le(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return ae(this,o)}}function ae(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(a,e);var t,n,r,i=ie(a);function a(){return oe(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=ee(ee({},J.options),this.props);return o.createElement(B,Q({store:A},e))}}])&&ne(t.prototype,n),r&&ne(t,r),a}(o.Component);const se=J;module.exports=t})();